!function(){"use strict";angular.module("app",["ionic","ionic.closePopup","app.core","ngCordova","app.login","app.station","app.bag"])}(),function(){"use strict";angular.module("app.bag",["ionic","ionic.closePopup","ngCordova","app.service"])}(),function(){"use strict";angular.module("app.core",["ngCordova","base64","toaster","app.service"])}(),function(){"use strict";angular.module("app.login",["ionic","ngCordova","app.service"])}(),function(){"use strict";angular.module("app.service",["ionic"])}(),function(){"use strict";angular.module("app.station",["ionic","ngCordova","app.service","app.bag"])}(),function(){"use strict";function t(t,n){t.navBar.alignTitle("center"),t.scrolling.jsScrolling(!1),n.defaults.headers.common={},n.defaults.headers.post={},n.defaults.headers.put={},n.defaults.headers.patch={},n.defaults.withCredentials=!1,n.defaults.useXDomain=!0,delete n.defaults.headers.common["X-Requested-With"],n.interceptors.push(["$rootScope",function(t){return{request:function(n){return t.$broadcast("loading:show"),n},response:function(n){return t.$broadcast("loading:hide"),n}}}]),t.scrolling.jsScrolling(!1),t.tabs.position("bottom")}angular.module("app").config(t),t.$inject=["$ionicConfigProvider","$httpProvider"]}(),function(){"use strict";function t(t,n){t.state("login",{url:"/login",templateUrl:"app/login/login.html",controller:"LoginController as vm"}).state("station",{url:"/station",templateUrl:"app/station/station.html",controller:"StationController as vm"}).state("station-detail",{url:"/station/:stationName",params:{stationName:void 0,stationType:void 0,locations:[]},templateUrl:"app/station/detail/station-detail.html",controller:"StationDetailController as vm"}).state("station-monitor",{url:"/station/monitored",templateUrl:"app/station/monitor/station-monitor.html",controller:"StationMonitorController as vm"}).state("station-offline",{url:"/station/offline/:stationName",params:{stationName:void 0},templateUrl:"app/station/offline/station-offline.html",controller:"StationOfflineController as vm"}).state("bag",{url:"/bag/:lpn",templateUrl:"app/bag/bag.html",params:{lpn:""},controller:"BagController as vm"}),n.otherwise("/login")}angular.module("app").config(t),t.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";function t(t,n,e,o,a,i){t.ready(function(){function t(t){window.scrollTo(0,0)}n(function(){e.hide()},100),window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),window.StatusBar&&StatusBar.styleLightContent(),window.addEventListener("native.keyboardhide",t),document.addEventListener("focusout",function(t){window.scrollTo(0,0)}),o.$on("loading:show",function(){a.show({template:'<ion-spinner icon="lines" style="stroke: #F17B21; fill: #F17B21"/>',showBackdrop:!0,duration:5e3})}),o.$on("loading:hide",function(){a.hide()}),i.preloadDatabase(!0)})}angular.module("app").run(t),t.$inject=["$ionicPlatform","$timeout","$cordovaSplashscreen","$rootScope","$ionicLoading","sqliteService"]}(),function(){"use strict";function t(t,n,e,o,a,i,s,r,c,l,u,d,g){function v(){I.currentStation=d.getCurrentStation().stationName,l.getBag(e.lpn,I.currentStation).then(function(t){console.log(t),angular.isUndefined(t.code)?(I.isError=!1,h(t),w(t)):(I.isError=!0,console.log(t.message),I.error=t.message)},function(t){console.log(t)})}function b(){document.addEventListener("deviceready",function(){s.scan().then(function(t){""!==t.text&&n.go("bag",{bagTag:t.text})},function(t){I.text=t})})}function p(){n.go("station-detail",{stationName:I.currentStation,stationType:d.getCurrentStation().stationType,locations:d.getCurrentStation().locations})}function f(){console.log("logout");var t=a.confirm({title:"Logout",template:"Are you sure you want to logout?"});t.then(function(t){t?(d.logout(),n.go("login"),o(function(){i.clearCache(),i.clearHistory()},300)):console.log("do nothing")})}function m(){var t=a.show({template:"Please choose the option below",title:"Screen Bag",buttons:[{text:"<b>Unclear</b>",type:"button-assertive",onTap:function(t){console.log("unclear"),u.executeTask("ScreenBag",I.bag.lpn,"UNCLEAR").then(function(t){p()},function(t){console.log("error")})}},{text:"<b>Clear</b>",type:"button-positive",onTap:function(t){console.log("clear"),u.executeTask("ScreenBag",I.bag.lpn,"CLEAR").then(function(t){p()},function(t){console.log("error")})}}]});g.register(t)}function S(){if(!angular.isUndefined(I.bag))switch(console.log(I.hasTask),I.hasTask){case"Release":u.executeTask("ReleaseBag",I.bag.lpn).then(function(t){p()},function(t){console.log("error")});break;case"Screen":m();break;case"Store":u.executeTask("StoreBag",I.bag.lpn).then(function(t){p()},function(t){console.log("error")});break;case"Deliver":u.executeTask("DeliverBag",I.bag.lpn).then(function(t){p()},function(t){console.log("error")})}}function h(t){angular.isUndefined(t)||(l.canRelease(t)?I.hasTask="Release":k(t),console.log(I.hasTask))}function k(t){var n=d.getCurrentStation().stationType;switch(console.log(n),n){case"Screening":l.canScreen(t)?I.hasTask="Screen":(console.log("ReadOnly"),I.hasTask="ReadOnly");break;case"Store":l.canStore(t)?I.hasTask="Store":(console.log("readOnly"),I.hasTask="ReadOnly");break;case"Stillage":l.canDeliver(t)?I.hasTask="Deliver":I.hasTask="ReadOnly";break;default:I.hasTask="ReadOnly"}}function w(t){I.bag.lpn=t.lpn,I.bag.task=t.task.description,I.bag.preposition=A(t.task.description),I.bag.destination=C(t.task.destinations),I.bag.proposedLocation=t.storeLocationProposal,I.bag.currentStoreStation=t.currentStoreStation,I.bag.currentStoreLocation=t.currentStoreLocation,I.bag.registrationStatus=t.registrationStatus,T(t),y(t),E(t),L(t),$(t)}function T(t){I.bag.destinations=t.outboundFlight,I.bag.process=t.process,I.bag.atl=x(t.reconciliation.authorityToLoad)}function y(t){I.person=t.passenger,I.person.seat=t.reconciliation.seatNumber,I.person.paxStatus=R(t.reconciliation.passengerStatus),I.person.exception=U(t.exceptions)}function E(t){I.process=t.process,I.process.handler=t.handler,I.process.remarks=P(t.process.remarks)}function L(t){I.outbound=t.outboundFlight,I.inbound=t.inboundFlight,I.onwards=t.onwardFlights}function $(t){I.status=t.container,I.status.bagStatus=B(t.bagStatusCode),I.status.bagTagStatus=O(t.reconciliation.baggageStatus)}function N(t){return angular.isUndefined(t)||angular.isUndefined(t.airline)||angular.isUndefined(t.flightNumber)?!1:null!==t.airline&&null!==t.flightNumber?!0:void 0}function C(t){var n="";if(null!=t[0])for(var e=0;e<t.length;e++)e>0&&(n+=", "),n+=t[e].name;return n}function x(t){return t?"YES":"NO"}function R(t){var n="";if(null!==t)switch(t.toUpperCase()){case"B":n="Boarded";break;case"C":n="Checked in";break;case"N":n="Not checked in";break;case"S":n="Standby";break;default:n=t}return n}function B(t){var n="";if(null!==t)switch(t.toUpperCase()){case"NAL":n="Loaded, NOT ATL";break;case"OFF":n="Offloaded";break;case"ONA":n="On hand, ATL";break;case"OND":n="On hand, NOT ATL";break;case"UNS":n="Unseen";break;default:n=t}return n}function O(t){var n="";if(null!==t)switch(t.toUpperCase()){case"I":n="Inactive";break;case"A":n="Active";break;case"V":n="Validated";break;default:n=t}return n}function U(t){var n="";if(null!=t)for(var e=0;e<t.length;e++)n+=t[e],e<t.length-1&&(n+="/");return n}function P(t){return null!=t?t[0]:""}function A(t){var n="";if(null!==t)switch(t.toLowerCase()){case"store":n=" in ";break;case"screen":n=" at ";break;case"deliver":n=" to ";break;case"release":n=" from ";break;default:n=" at "}return n}var I=this;I.back=p,I.isExist=N,I.logout=f,I.bag={},I.scan=b,I.isError=!1,I.execute=S,I.hasTask="ReadOnly",t.$on("$ionicView.enter",function(){console.log(e),v()})}angular.module("app.bag").controller("BagController",t),t.$inject=["$scope","$state","$stateParams","$timeout","$ionicPopup","$ionicHistory","$cordovaBarcodeScanner","StationService","UserService","BagService","TaskService","SessionService","IonicClosePopupService"]}(),function(){"use strict";function t(t,n,e,o,a){function i(o,a){var i=e.defer();return t.restCall("Bag",n.getUser().auth,s(o,a)).then(function(t){i.resolve(t.data)},function(t){console.log(t),i.reject(t.data)}),i.promise}function s(t,n){var e="&lpn="+t;return e+="&station="+n,e+="&isLpnScanned=false&forceCreate=false&device=emulator"}function r(t){return"ReleaseBag"in d&&"REGISTERED_IN_MTT"===t.registrationStatus?d.ReleaseBag.allowedRoles in g:!1}function c(t){return"ScreenBag"in d&&d.ScreenBag.allowedRoles in g?"NOT_REGISTERED"===t.registrationStatus?!0:("REGISTERED_IN_MTT"===t.registrationStatus,!1):!1}function l(t){return console.log(t),console.log("can store"),"StoreBag"in d?(console.log("ada di supported functions"),d.StoreBag.allowedRoles in g?(console.log("ada di roles"),console.log(t.registrationStatus),"NOT_REGISTERED"===t.registrationStatus?!0:("REGISTERED_IN_MTT"===t.registrationStatus,!1)):!1):!1}function u(t){return"DeliverBag"in d&&d.DeliverBag.allowedRoles in g?"NOT_REGISTERED"===t.registrationStatus?!0:("REGISTERED_IN_MTT"===t.registrationStatus,!1):!1}var d=t.getSupportedFunctions(),g=n.getRoles(),v={getBag:i,createParams:s,canRelease:r,canScreen:c,canStore:l,canDeliver:u};return v}angular.module("app.bag").factory("BagService",t),t.$inject=["ApiService","UserService","$q","$timeout"]}(),function(){"use strict";function t(t,n){function e(){return r||(r=window.cordova?n.openDB({name:"demo.db",location:1}):void 0!==window.sqlitePlugin?window.sqlitePlugin.openDatabase({name:"demo.db",location:2,createFromLocation:1}):window.openDatabase("demo.db","1.0","Demo",2e5)),r}function o(n,e){var o=t.defer();return s(n,e).then(function(t){for(var n=[],e=0;e<t.rows.length;e++)n.push(t.rows.item(e));return o.resolve(n)},function(t){return o.reject(t)}),o.promise}function a(n){var o=t.defer();return n&&console.log("%c ***************** Starting the creation of the database in the browser ***************** ","background: #222; color: #bada55"),e().transaction(function(){for(var t=0;t<c.length;t++)console.log(c[t]),s(c[t])},function(t){o.reject(t)},function(){n&&console.log("%c ***************** Completing the creation of the database in the browser ***************** ","background: #222; color: #bada55"),o.resolve("OK")}),o.promise}function i(n,e){var o=t.defer();return s(n,e).then(function(t){return o.resolve(t)},function(t){return o.reject(t)}),o.promise}function s(t,o){return n.execute(e(),t,o)}var r,c=["DROP TABLE IF EXISTS Users;","DROP TABLE IF EXISTS Stations;","DROP TABLE IF EXISTS BagsToProcess;","CREATE TABLE Users (id integer primary key autoincrement, Username text not null);","CREATE TABLE Stations(id integer primary key autoincrement,StationName text not null, StationType text not null, StationLocation text);","CREATE TABLE BagsToProcess(id integer primary key autoincrement, LPN integer not null, Username text not null, StationName text not null);",'INSERT INTO "Stations" ("id","StationName", "StationType", "StationLocation") VALUES (1, "OOG Store", "Store","Rack 1, Rack 2, Rack 3");','INSERT INTO "Stations" ("id","StationName", "StationType", "StationLocation") VALUES (2, "HBS North", "Screening", NULL);','INSERT INTO "Stations" ("id","StationName", "StationType", "StationLocation") VALUES (3, "Lateral 1", "Stillage", NULL);'],l={db:e,getItems:o,preloadDatabase:a,insert:i,executeSQL:s};return l}angular.module("app.service").factory("sqliteService",t),t.$inject=["$q","$cordovaSQLite"]}(),function(){"use strict";function t(t,n,e,o,a,i,s,r,c){function l(){console.log("Fetching supported functions"),i.fetchSupport().then(function(t){console.log(t),t.match("error")?u("error","Loading Error","Failed to load SupportedFunctions",5e3):u("success","Loaded","SupportedFunctions successfully loaded!",2e3)},function(t){u("error","Loading Error","Failed to load SupportedFunctions",5e3)})}function u(t,n,e,o){a.pop(t,n,e,o)}function d(){o.cordova&&o.cordova.plugins&&cordova.plugins.Keyboard.close(),window.scrollTo(0,0),b.isOnline?i.login(b.username,b.password).then(function(t){n.go("station"),console.log(t)},function(t){0===t.status?u("error","Connection Error","Not connected to the server",5e3):401===t.status&&u("error","Login Error","Wrong username or password",5e3)}):v()}function g(t){var n=t/2+"px";return 0===t?305:n}function v(){r.ready(function(){s.offlineLogin(b.username).then(function(t){i.login(b.username),n.go("station")},function(t){console.log(t)})})}var b=this;b.login=d,b.box=g(b.height),b.isOnline=!0,b.showLogin=!1,b.offline=v,l()}angular.module("app.login").controller("LoginController",t),t.$inject=["$scope","$state","$ionicLoading","$window","toaster","SessionService","loginService","$ionicPlatform","UserService"]}(),function(){"use strict";function t(t,n){function e(){var e="SELECT * FROM Stations";return t.when(n.getItems(e))}function o(){return t.when(n.preloadDatabase(!0))}function a(){var e="CREATE TABLE Stations(StationId ";return e+="integer primary key autoincrement,StationName text not null, StationLocation text);",e+='INSERT INTO "Stations" ("StationId","StationName",',e+='"StationLocation") VALUES (1, "OOG Store", "Rack 1, Rack 2, Rack 3");',t.when(n.executeSQL(e))}function i(e){var o='INSERT INTO "Users" ("Username") VALUES ("'+e+'");';return t.when(n.insert(o))}var s={getStations:e,preload:o,createTable:a,offlineLogin:i};return s}angular.module("app.service").factory("loginService",t),t.$inject=["$q","sqliteService"]}(),function(){"use strict";function t(t,n){function e(){return d}function o(){return v}function a(t){v=t}function i(){var e=n.defer();return t.get(d+"/mttws/public/meta/SupportedFunctions").then(function(t){e.resolve(t.data),s(t.data)},function(t){e.reject(t)}),e.promise}function s(t){g=t}function r(){return g}function c(t){var n="";return angular.forEach(g,function(e,o){o===t&&(n=e.uri)}),d+n}function l(t){var n="";return angular.forEach(g,function(e,o){o===t&&(n=e.method)}),n}function u(n,e,o){angular.isUndefined(o)&&(o="");var a=c(n)+"?auth="+e,i=l(n);return"GET"===i?(a+=o,console.log(a),t.get(a)):"POST"===i?(console.log(o),console.log(a),t({url:a,method:"POST",data:o,headers:{"Content-Type":"application/json",Accept:"application/json","Accept-Language":"en-GB"}})):"PUT"===i?t({url:a,method:"PUT",data:o,headers:{"Content-Type":"application/json"}}):void 0}var d="http://192.168.192.26",g={},v=5e3,b={getURL:e,getURI:c,getMethod:l,supportedFunctions:i,getTimeout:o,setTimeout:a,setSupportedFunctions:s,getSupportedFunctions:r,restCall:u};return b}angular.module("app.service").factory("ApiService",t),t.$inject=["$http","$q"]}(),function(){"use strict";function t(t,n,e,o,a){function i(){var t=n.defer();return e.supportedFunctions().then(function(n){t.resolve(n)},function(n){t.reject(n)}),t.promise}function s(t,i){var s=a.encode(t+":"+i);if(f){var r=n.defer();return e.restCall("Roles",s,"").then(function(n){o.setCredentials(t,s,n.data),r.resolve(n.data)},function(t){r.reject(t)}),r.promise}o.setCredentials(t,s)}function r(){var t=n.defer();return o.resetCredentials(),e.restCall("Roles","logout","").then(function(n){t.resolve(n.data)},function(n){o.resetCredentials(),t.reject(n)}),t.promise}function c(t){b=t}function l(){return b}function u(t){p=t}function d(){return p}function g(t){f=t}function v(){return f}var b={},p={},f=!1,m={fetchSupport:i,login:s,logout:r,setCurrentStation:c,getCurrentStation:l,setMonitoredStations:u,getMonitoredStations:d,setOnlineStatus:g,getOnlineStatus:v};return m}angular.module("app.service").factory("SessionService",t),t.$inject=["$http","$q","ApiService","UserService","$base64"]}(),function(){"use strict";function t(t,n){function e(t,n,e){o(t,n),s(e)}function o(t,n){c.username=t,c.auth=n,c.isLoggedIn=!0}function a(){return c}function i(){c.username="",c.auth="",c.isLoggedIn=!1,c.roles={}}function s(t){c.roles=angular.copy(t)}function r(){return c.roles}var c={username:"",auth:"",isLoggedIn:!1,roles:{}},l={setCredentials:e,resetCredentials:i,createUser:o,getUser:a,setRoles:s,getRoles:r};return l}angular.module("app.service").factory("UserService",t),t.$inject=["$http","$q"]}(),function(){"use strict";function t(t,n,e,o,a,i,s,r,c,l){function u(){c.registerMonitor(l.getMonitoredStations()).then(function(t){},function(t){console.log(t)}),c.getBagsToProcess(l.getCurrentStation().stationName,"Emulator",l.getMonitoredStations()).then(function(t){angular.equals("",t)?k.isExist=!1:angular.equals([],t)?k.isExist=!1:k.isExist=!0,k.bagsToProcess=t},function(t){console.log(t),k.isExist=!1})}function d(t){console.log(t),c.executeBag(t.lpn).then(function(t){u()},function(t){console.log("error")})}function g(){n.go("station")}function v(){n.go("station-monitor")}function b(t){console.log(t),n.go("bag",{lpn:t})}function p(){console.log("scan"),document.addEventListener("deviceready",function(){r.scan().then(function(t){""!==t.text&&n.go("bag",{lpn:t.text})},function(t){k.text=t})})}function f(){console.log("logout");var t=s.confirm({title:"Logout",template:"Are you sure you want to logout?"});t.then(function(t){t?(l.logout(),n.go("login"),o(function(){a.clearCache(),a.clearHistory()},300)):console.log("do nothing")})}function m(t){var n="";return n+=t.taskDescription,n+=h(t.taskDescription),n+=t.taskDestinations}function S(t){var n="";if(null!==t)switch(t.toLowerCase()){case"store":n="Store.png";break;case"screen":n="Screening.png";break;case"deliver":n="Stillage.png";break;case"release":n="StationTypeRelease.png";break;default:n="Store.png"}return n}function h(t){var n="";if(null!==t)switch(t.toLowerCase()){case"store":n=" in ";break;case"screen":n=" at ";break;case"deliver":n=" to ";break;case"release":n=" from ";break;default:n=" at "}return n}var k=this;l.setCurrentStation(e),k.currentStation=e.stationName,k.logout=f,k.monitor=v,k.back=g,k.scan=p,k.isExist=!1,k.setTaskDescription=m,k.getIcon=S,k.bagsToProcess=null,k.open=b,k.execute=d,t.$on("$ionicView.enter",function(){u()}),i.on("volumeupbutton",function(){p()})}angular.module("app.station").controller("StationDetailController",t),t.$inject=["$scope","$state","$stateParams","$timeout","$ionicHistory","$ionicPlatform","$ionicPopup","$cordovaBarcodeScanner","StationDetailService","SessionService"]}(),function(){"use strict";function t(t,n,e,o,a,i,s,r){function c(e,o,a){var s=i.defer();return t.restCall("BagsToProcess",n.getUser().auth,d(e,o,a)).then(function(t){s.resolve(t.data)},function(t){console.log(t),s.reject(t.data)}),s.promise}function l(e){var o=[];for(var a in e)null!==a&&(angular.isUndefined(e[a].checked)?o.push(e[a].stationName):e[a].checked&&o.push(e[a].stationName));var s={};s.station=o;var r=i.defer();return t.restCall("RegisterMonitor",n.getUser().auth,s).then(function(t){r.resolve(t)},function(t){r.reject(t.data)}),r.promise}function u(t){var n=i.defer();return console.log(t),a.executeTask("ReleaseBag",t).then(function(t){n.resolve(t)},function(t){n.reject(t.data)}),n.promise}function d(t,n,e){var o="&station="+t;o+="&device="+n;for(var a in e)null!==a&&(angular.isUndefined(e[a].checked)?o+="&StoreStation[]="+e[a].stationName:e[a].checked&&(o+="&StoreStation[]="+e[a].stationName));return o}var g={getBagsToProcess:c,createParams:d,registerMonitor:l,executeBag:u};return g}angular.module("app.station").factory("StationDetailService",t),t.$inject=["ApiService","UserService","SessionService","BagService","TaskService","$q","$timeout"]}(),function(){"use strict";function t(t,n,e,o,a){function i(){var t=a.getMonitoredStations();u.storeStations=r(t)}function s(){o.$watchCollection("vm.storeStations",function(t,n){a.setMonitoredStations(t)}),e.goBack()}function r(t){var n=[];for(var e in t)null!==e&&(angular.isUndefined(t[e].checked)?n.push({stationName:t[e].stationName,checked:!0}):n.push({stationName:t[e].stationName,checked:t[e].checked}));return n}function c(){angular.forEach(u.storeStations,function(t){t.checked=!0})}function l(){angular.forEach(u.storeStations,function(t){t.checked=!1})}var u=this;u.property="StationMonitorController",u.back=s,u.selectAll=c,u.deselectAll=l,i()}angular.module("app.station").controller("StationMonitorController",t),t.$inject=["UserService","StationService","$ionicHistory","$scope","SessionService"]}(),function(){"use strict";function t(t,n,e,o,a,i,s,r,c,l){function u(){console.log("activated")}function d(t){console.log(t)}function g(){n.go("station")}function v(){n.go("station-monitor")}function b(t){console.log(t),n.go("bag",{lpn:t})}function p(){console.log("scan"),document.addEventListener("deviceready",function(){s.scan().then(function(t){""!==t.text&&n.go("bag",{lpn:t.text})},function(t){w.text=t})})}function f(t){console.log(t);var n={lpn:t,username:l.getUser().username,isScanned:!0,currentStation:c.getCurrentStation().stationName};r.getNumberOfRecords()>0?console.log(n):(console.log(n),r.insertTrackRecord(n).then(function(t){console.log(t)},function(t){console.log(t)}))}function m(){console.log("logout");var t=a.confirm({title:"Logout",template:"Are you sure you want to logout?"});t.then(function(t){t?(c.logout(),n.go("login")):console.log("do nothing")})}function S(t){var n="";return n+=t.taskDescription,n+=k(t.taskDescription),n+=t.taskDestinations}function h(t){var n="";if(null!==t)switch(t.toLowerCase()){case"store":n="Store.png";break;case"screen":n="Screening.png";break;case"deliver":n="Stillage.png";break;case"release":n="StationTypeRelease.png";break;default:n="Store.png"}return n}function k(t){var n="";if(null!==t)switch(t.toLowerCase()){case"store":n=" in ";break;case"screen":n=" at ";break;case"deliver":n=" to ";break;case"release":n=" from ";break;default:n=" at "}return n}var w=this;c.setCurrentStation(e),w.currentStation=e.stationName,w.logout=m,w.monitor=v,w.back=g,w.scan=p,w.isExist=!1,w.setTaskDescription=S,w.getIcon=h,w.bagsToProcess=null,w.open=b,w.execute=d,w.add=f,t.$on("$ionicView.enter",function(){u()}),i.on("volumeupbutton",function(){p()})}angular.module("app.station").controller("StationOfflineController",t),t.$inject=["$scope","$state","$stateParams","$ionicHistory","$ionicPopup","$ionicPlatform","$cordovaBarcodeScanner","StationOfflineService","SessionService","UserService"]}(),function(){"use strict";function t(t,n,e,o,a,i,s){function r(t){var n='INSERT INTO "Users" ("Username") VALUES ("'+t+'");';return o.when(i.insert(n))}function c(){var t="SELECT * FROM BagsToProcess";return o.when(i.insert(t))}function l(){var t=0;return c().then(function(n){t=n.rows.length},function(n){console.log(n),t=0}),t}function u(t){var n='INSERT INTO "BagsToProcess" ';return n+='("LPN", "Username", "StationName") ',n+='VALUES ("'+t.lpn+'", "'+t.username+'", ',n+='"'+t.station+'")',o.when(i.insert(n))}var d={offlineLogin:r,getBagsToProcess:c,getNumberOfRecords:l,insertTrackRecord:u};return d}angular.module("app.service").factory("StationOfflineService",t),t.$inject=["ApiService","UserService","SessionService","$q","$timeout","sqliteService"]}(),function(){"use strict";function t(t,n,e,o,a,i,s,r,c,l){function u(){if(S.isOnline=c.getOnlineStatus(),c.getOnlineStatus())d();else{l.ready(function(){s.getOfflineStations().then(function(t){S.offlineStations=angular.copy(t)},function(t){console.log(t)})})}S.username=r.getUser().username}function d(){s.getStations().then(function(t){S.stations=t,console.log(t)},function(t){console.log(t)})}function g(){console.log(S.stations)}function v(){console.log("scan"),document.addEventListener("deviceready",function(){i.scan().then(function(t){alert(t.text+"\n"+t.format)},function(t){S.text=t})})}function b(){var t=c.getCurrentStation().stationName,n=c.getCurrentStation().stationType,o=c.getCurrentStation().locations;e.go("station-detail",{stationName:t,stationType:n,locations:o})}function p(t){return"default"!==t}function f(t){var n={};return angular.forEach(S.stations,function(e,o){console.log("key"+o),console.log("value"+e),e.type===t&&(n[o]=e)}),n}function m(){var t=a.confirm({title:"Logout",template:"Are you sure you want to logout?"});t.then(function(t){t&&(c.logout(),e.go("login"))})}var S=this;S.back=b,S.scan=v,S.logout=m,S.stations=[],S.type="Screening",S.filterStations=f,S.isCurrentStationExist=!1,S.check=p,S.isOnline=!1,S.populateOfflineView=g,n.$on("$ionicView.enter",function(){u()})}angular.module("app.station").controller("StationController",t),t.$inject=["$timeout","$scope","$state","$ionicHistory","$ionicPopup","$cordovaBarcodeScanner","StationService","UserService","SessionService","$ionicPlatform"]}(),function(){"use strict";function t(t,n,e,o,a,i,s){function r(){var a=o.defer();return t.restCall("Stations",n.getUser().auth).then(function(t){var n=l(t.data);e.setMonitoredStations(n),a.resolve(t.data)},function(t){console.log(t),a.reject(t.data)}),a.promise}function c(){var t="SELECT * FROM Stations";return o.when(i.getItems(t))}function l(t){var n=[];for(var e in t)null!==e&&"Store"===t[e].type&&n.push({stationName:e});return n}function u(){var a=o.defer();return t.restCall("MonitoredStations",n.getUser().auth,"").then(function(t){console.log(t),e.setMonitoredStations(t.data),a.resolve(t.data)},function(t){a.reject(t.data)}),a.promise}function d(t,n,e){var o="&station="+t;o+="&device="+n;for(var a in e)null!==a&&(angular.isUndefined(e[a].checked)?o+="&StoreStation[]="+e[a].stationName:e[a].checked&&(o+="&StoreStation[]="+e[a].stationName));return o}var g={getStations:r,getOfflineStations:c,getMonitoredStations:u,createParams:d,filterStoreStation:l};return g}angular.module("app.station").factory("StationService",t),t.$inject=["ApiService","UserService","SessionService","$q","$timeout","sqliteService"]}(),function(){"use strict";function t(t,n,e,o){function a(a,i,s){console.log(i);var r={lpn:i,isLpnScanned:"false",station:e.getCurrentStation().stationName,device:"Emulator"};"StoreBag"===a&&(console.log("StoreBag"),r.storeLocation="PB Store 2"),"ScreenBag"===a&&(console.log("ScreenBag"),r.screeningProcess="ECAC",r.screeningResult=s),console.log(r.lpn),r=angular.toJson(r);var c=o.defer();return t.restCall(a,n.getUser().auth,r).then(function(t){c.resolve(t)},function(t){c.reject(t.data)}),c.promise}var i={executeTask:a};return i}angular.module("app.service").service("TaskService",t),t.$inject=["ApiService","UserService","SessionService","$q"]}(),angular.module("app.core").run(["$templateCache",function(t){t.put("app/bag/bag.html",'<div id=bag><div class="bar bar-header bar-header-vanderlande"><button class="button button-icon icon ion-power header-icon" ng-click=vm.logout()></button><div class="h1 title" ng-click=vm.back()>{{vm.currentStation}}</div><button class="button button-icon icon ion-ios-location header-icon" ng-click=vm.monitor()></button></div><div on-touch=vm.scan() class="bar bar-subheader bar-subheader-vanderlande"><h2 class="title subheader">Scan</h2></div><ion-pane><div ng-show=vm.isError id=bag-error class="has-header has-subheader"><div style="display: block"><button class="button button-icon icon ion-ios-arrow-left back-button" ng-click=vm.back()></button></div><span class=bag-task__text>{{vm.error}}</span> <button id on-touch=vm.scan() class="button button-block button-login"><i class=ion-ios-refresh-empty></i> Re-Scan</button></div><div ng-hide=vm.isError id=bag-task class="has-header has-subheader"><div style="display: block"><button class="button button-icon icon ion-ios-arrow-left back-button" ng-click=vm.back()></button></div><div><span class=bag-task__text>{{vm.bag.task}}</span> <span id=bag-task__lpn>{{vm.bag.lpn}}</span> <span class=bag-task__decorator>{{vm.bag.preposition}}</span> <span class=bag-task__text>{{vm.bag.destination}}</span> <span class=bag-task__decorator ng-show=vm.bag.currentStoreStation>Location: {{vm.bag.currentStoreStation}} - {{vm.bag.currentStoreLocation}}</span> <span ng-show=vm.bag.proposedLocation class=bag-task__decorator>Proposed location: {{vm.bag.proposedLocation}}</span> <button id=taskButton ng-hide="vm.hasTask == \'ReadOnly\'" ng-click=vm.execute() class="button button-block button-login">{{vm.hasTask}} Bag</button></div></div><div ng-hide=vm.isError id=bag-tabs class><div id=bag-details><div ui-view=bag-destination></div><ion-tabs><ion-tab title=Destination><ion-nav-view name=Destination><div class="row bag-tabs-details"><div class="col col-50">Destination <span class=bag-tabs-value>{{vm.bag.destinations.destination}}</span></div><div class="col col-50">Process <span class=bag-tabs-value>{{vm.bag.process.processName}}</span></div></div><div class="row bag-tabs-details"><div class="col col-50">Flight <span class=bag-tabs-value>{{vm.bag.destinations.airline}} {{vm.bag.destinations.flightNumber}}</span></div><div class="col col-50">STD / ETD <span class=bag-tabs-value>{{vm.bag.destinations.etd | date : \'HH:mm\'}} / {{vm.bag.destinations.std | date : \'HH:mm\'}}</span></div></div><div class="row bag-tabs-details"><div class="col col-50">Stand <span class=bag-tabs-value>{{vm.bag.destinations.stand}}</span></div><div class="col col-50">ATL <span class=bag-tabs-value>{{vm.bag.atl}}</span></div></div></ion-nav-view></ion-tab><ion-tab title=Person><ion-nav-view name=Person><div class="row bag-tabs-details"><div class=col>Name <span class=bag-tabs-value>{{vm.person.surname}} {{vm.person.givenName}}</span></div></div><div class="row bag-tabs-details"><div class="col col-50">Seat<span class=bag-tabs-value>{{vm.person.seat}}</span></div><div class="col col-50">Pax Status<span class=bag-tabs-value>{{vm.person.paxStatus}}</span></div></div><div class="row bag-tabs-details"><div class="col col-50">Freq Travel<span class=bag-tabs-value>{{vm.person.frequentTravelerTierIdentifier}}</span></div><div class="col col-50">Exception<span class=bag-tabs-value>{{vm.person.exception}}</span></div></div></ion-nav-view></ion-tab><ion-tab title=Screen><ion-nav-view name=Screen><div class="row bag-tabs-details"><div class="col col-50">Last exec task <span class=bag-tabs-value>{{vm.process.lastExecutedTask}}</span></div><div class="col col-50">Last seen at<span class=bag-tabs-value>{{vm.process.lastSeenAt}}</span></div></div><div class="row bag-tabs-details"><div class="col col-50">Timeliness<span class=bag-tabs-value>{{vm.process.flightBuildTimeliness}}</span></div><div class="col col-50">Handler<span class=bag-tabs-value>{{vm.process.handler}}</span></div></div><div class="row bag-tabs-details"><div class=col>Remark<span class=bag-tabs-value>{{vm.process.remarks}}</span></div></div></ion-nav-view></ion-tab><ion-tab title=Flight><ion-nav-view name=Flight><div class="row bag-tabs-details" ng-show=vm.isExist(vm.outbound)><div class="col col-50">Outbound <span class=bag-tabs-value>{{vm.outbound.airline + vm.outbound.flightNumber}} {{vm.outbound.date | date: \'dd-MMM\'}}</span></div><div class="col col-25">To <span class=bag-tabs-value>{{vm.outbound.destination}}</span></div><div class="col col-25">Class <span class=bag-tabs-value>{{vm.outbound.classOfTravel}}</span></div></div><div class="row bag-tabs-details" ng-show=vm.isExist(vm.inbound)><div class="col col-50">Inbound <span class=bag-tabs-value>{{vm.inbound.airline + vm.inbound.flightNumber}} {{vm.inbound.date | date: \'dd-MMM\'}}</span></div><div class="col col-25">From<span class=bag-tabs-value>{{vm.inbound.origin}}</span></div><div class="col col-25">Class <span class=bag-tabs-value>{{vm.inbound.classOfTravel}}</span></div></div><div class="row bag-tabs-details" ng-show=vm.isExist(vm.onwards[0])><div class="col col-50">Onwards <span class=bag-tabs-value>{{vm.onwards[0].airline + vm.onwards[0].flightNumber}} {{vm.onwards[0].date | date: \'dd-MMM\'}}</span></div><div class="col col-25">To<span class=bag-tabs-value>{{vm.onwards[0].destination}}</span></div><div class="col col-25">Class <span class=bag-tabs-value>{{vm.onwards[0].classOfTravel}}</span></div></div></ion-nav-view></ion-tab><ion-tab title=Status><ion-nav-view name=Status><div class="row bag-tabs-details"><div class="col col-50">ULD ID <span class=bag-tabs-value>{{vm.status.uldIdentificationCode}}</span></div><div class="col col-50">Load Sequence <span class=bag-tabs-value>{{vm.status.loadSequenceNumber}}</span></div></div><div class="row bag-tabs-details"><div class="col col-50">Bag Tag Status <span class=bag-tabs-value>{{vm.status.bagTagStatus}}</span></div><div class="col col-50">Baggage Status<span class=bag-tabs-value>{{vm.status.bagStatus}}</span></div></div><div class="row bag-tabs-details"><div class="col col-50">Loading location<span class=bag-tabs-value>{{vm.status.loadingLocation}}</span></div></div></ion-nav-view></ion-tab></ion-tabs></div></div></ion-pane></div>'),
t.put("app/station/station.html",'<div id=station><div class="bar bar-header bar-header-vanderlande"><button ng-show=vm.isCurrentStationExist class="button button-icon icon ion-ios-arrow-left header-icon" ng-click=vm.back()></button><div class="h1 title">Select Location</div></div><div class="bar bar-subheader bar-subheader-vanderlande" on-touch=vm.scan()><h2 class="title subheader">Scan</h2></div><ion-content class="has-header has-subheader" padding=true scrollbar-y=false style="padding-right=0;"><ion-list class=list-station><ion-item ng-show=vm.isOnline class="item-location item-icon-left item-icon-right" ng-repeat="(key, value) in vm.filterStations(vm.type)" item=station ui-sref="station-detail({stationName: key, stationType: value.type, locations: value.locations})"><i class=icon><img class="image-responsive list-station-icon" ng-src=images/{{value.type}}.png></i>{{key}} <i class="icon ion-ios-arrow-right icon-arrow"></i></ion-item><ion-item ng-show=!vm.isOnline class="item-location item-icon-left item-icon-right" ng-repeat="station in vm.offlineStations" item=station ui-sref="station-offline({stationName: station.StationName})"><i class=icon><img class="image-responsive list-station-icon" ng-src=images/{{station.StationType}}.png></i>{{station.StationName}} <i class="icon ion-ios-arrow-right icon-arrow"></i></ion-item></ion-list></ion-content><div class="bar bar-footer bar-dark" ng-show=vm.isOnline><div class="button-bar bar-dark"><a class=button ng-click="vm.type = \'Screening\'">Screen</a> <a class=button ng-click="vm.type = \'Store\'">Store</a> <a class=button ng-click="vm.type = \'Stillage\'">Stillage</a> <a class=button ng-click="vm.type = \'Tracking\'">Tracking</a></div></div></div>'),t.put("app/login/login.html",'<div id=login><ion-content class=login-box scroll=false overflow-scroll=false><div class=box ng-style="{\'min-height\': vm.box}"><img class=vdl-logo ng-src=images/vanderlande.png><toaster-container toaster-options="{\'close-button\':true, \'position-class\': \'toast-top-right\'}"></toaster-container></div><div class=login ng-style="{\'min-height\': vm.box}"><form name=loginForm ng-submit=vm.login() novalidate class=login-form><div id=mode ng-hide=vm.showLogin><button type=button class="button button-block button-mode" ng-click="vm.showLogin = true; vm.isOnline = false;"><i class="icon ion-wifi"></i> Offline Mode</button> <button type=button class="button button-block button-mode" ng-click="vm.showLogin = true; vm.isOnline = true;"><i class="icon ion-wifi"></i> Online Mode</button></div><div ng-show=vm.showLogin><p class=item-instructions>Enter or scan credentials:</p><div class=list><div class=form-group><label class="item item-input item-label"><input name=username type=text placeholder=Name ng-model=vm.username ng-minlength=5 required></label></div><div class=form-group ng-show=vm.isOnline><label class="item item-input item-label"><input name=password type=password placeholder=Password ng-minlength=5 ng-model=vm.password required></label></div><div class=row><div class=col><button type=button class="button button-block button-login" ng-click="vm.showLogin = false"><i class="icon ion-ios-arrow-left"></i> Back</button></div><div class=col><button type=submit class="button button-block button-login"><i class="icon ion-log-in"></i> Login</button></div></div></div></div></form></div></ion-content></div>'),t.put("app/station/detail/station-detail.html",'<div id=station-detail><div class="bar bar-header bar-header-vanderlande"><button class="button button-icon icon ion-power header-icon" ng-click=vm.logout()></button><div class="h1 title" ng-click=vm.back()>{{vm.currentStation}}</div><button class="button button-icon icon ion-ios-location header-icon" ng-click=vm.monitor()></button></div><div on-touch=vm.scan() class="bar bar-subheader bar-subheader-vanderlande"><h2 class="title subheader">Scan</h2></div><ion-content class="has-header has-subheader" scrollbar-y=false style="padding-left=0"><div class=scanbag ng-show=!vm.isExist>Scan Bag<br><span>for</span><br>Task</div><ion-list ng-show=vm.isExist class=list-station-details can-swipe=true><ion-item class=item-station-details ng-repeat="bags in vm.bagsToProcess" item=station ng-click=vm.open(bags.lpn)><div class=box><div class="row bag-details"><div class=bag-detail-time><span>15 Minutes</span></div><div class="col bag-detail-icons"><div class=row><i class=icon><img class="image-responsive bag-tags-icon" ng-src=images/{{vm.getIcon(bags.taskDescription)}}></i></div></div><div class="col col-33 bag-detail-col"><div id=bag-tag class=col><div class="row bag-tags-title">Bag Tag</div><div class="row bag-tags-value">{{bags.lpn}}</div></div><div id=bag-flight class=col><div class="row bag-tags-title">Flight</div><div class="row bag-tags-value">{{bags.flightNumber}}</div></div></div><div class="col col-40 bag-detail-col"><div id=bag-tasks class=col><div class="row bag-tags-title">Task</div><div class="row bag-tags-value">{{vm.setTaskDescription(bags)}}</div></div><div id=bag-store class=col><div class="row bag-tags-title">Store Location</div><div class="row bag-tags-value">{{bags.storeStation}}</div><div class="row bag-tags-value">{{bags.storeLocation}}</div></div></div><div class="col col-arrow"><i class="icon ion-ios-arrow-right icon-arrow"></i></div></div></div><ion-option-button class=button-release ng-click=vm.execute(bags)><div><i class="icon ion-ios-upload"></i> <span>Release</span></div></ion-option-button><ion-option-button ng-hide=true class=button-assertive ng-click=edit(item)>Missing<br>Bag</ion-option-button></ion-item></ion-list></ion-content></div>'),t.put("app/station/monitor/station-monitor.html",'<div id=station-monitor><div class="bar bar-header bar-header-vanderlande"><button class="button button-icon icon ion-ios-arrow-left header-icon" ng-click=vm.back()></button><div class="h1 title">Monitored Stations</div><button ng-hide=true class="button button-icon icon ion-person-stalker white" ng-click=vm.overview()></button></div><ion-content class=has-header scrollbar-y=false style="padding-right=0;"><ion-list class=list-monitor><ion-checkbox class=monitor-item ng-repeat="station in vm.storeStations" ng-model=station.checked ng-checked=station.checked ng-class="{\'tatatat\': station.checked}">{{station.stationName}}</ion-checkbox></ion-list></ion-content><ion-footer-bar class=bar-assertive><div class=button-bar><button class=button ng-click=vm.selectAll()>Select All</button> <button class=button ng-click=vm.deselectAll()>Deselect All</button></div></ion-footer-bar></div>'),t.put("app/station/offline/station-offline.html",'<div id=station-offline><div class="bar bar-header bar-header-vanderlande"><button class="button button-icon icon ion-power header-icon" ng-click=vm.logout()></button><div class="h1 title" ng-click=vm.back()>{{vm.currentStation}}</div><button class="button button-icon icon ion-upload header-icon" ng-click=vm.monitor()></button></div><div on-touch=vm.scan() class="bar bar-subheader bar-subheader-vanderlande"><h2 class="title subheader">Scan</h2></div><ion-content class="has-header has-subheader" scrollbar-y=false style="padding-left=0"><div class=list><div class="item item-input-inset"><label class=item-input-wrapper><input type=text placeholder="Enter bag tag" ng-model=vm.lpn></label> <button class="button button-clear button-dark icon" ng-click=vm.add(vm.lpn)>Add</button></div></div><div class=scanbag ng-show=!vm.isExist>Scan Bag<br><span>for</span><br>Task</div><ion-list ng-show=vm.isExist class=list-station-details can-swipe=true><ion-item class=item-station-details ng-repeat="bags in vm.bagsToProcess" item=station ng-click=vm.open(bags.lpn)><div class=box><div class="row bag-details"><div class=bag-detail-time><span>15 Minutes</span></div><div class="col bag-detail-icons"><div class=row><i class=icon><img class="image-responsive bag-tags-icon" ng-src=images/{{vm.getIcon(bags.taskDescription)}}></i></div></div><div class="col col-33 bag-detail-col"><div id=bag-tag class=col><div class="row bag-tags-title">Bag Tag</div><div class="row bag-tags-value">{{bags.lpn}}</div></div><div id=bag-flight class=col><div class="row bag-tags-title">Flight</div><div class="row bag-tags-value">{{bags.flightNumber}}</div></div></div><div class="col col-40 bag-detail-col"><div id=bag-tasks class=col><div class="row bag-tags-title">Task</div><div class="row bag-tags-value">{{vm.setTaskDescription(bags)}}</div></div><div id=bag-store class=col><div class="row bag-tags-title">Store Location</div><div class="row bag-tags-value">{{bags.storeStation}}</div><div class="row bag-tags-value">{{bags.storeLocation}}</div></div></div><div class="col col-arrow"><i class="icon ion-ios-arrow-right icon-arrow"></i></div></div></div><ion-option-button class=button-release ng-click=vm.execute(bags)><div><i class="icon ion-ios-upload"></i> <span>Release</span></div></ion-option-button><ion-option-button ng-hide=true class=button-assertive ng-click=edit(item)>Missing<br>Bag</ion-option-button></ion-item></ion-list></ion-content></div>')}]);